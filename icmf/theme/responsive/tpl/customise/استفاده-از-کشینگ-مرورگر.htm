<article class="whiteFrame paddy10 curvedFull">
	<h1>حذف جاوا اسكريپت بلوك كننده بازگرداني</h1>
	<div class="center">
		<img src="theme/{$settings.theme}/img/Remove Render.jpg" alt="حذف جاوا اسكريپت بلوك كننده بازگرداني" title="حذف جاوا اسكريپت بلوك كننده بازگرداني" width="638" height="359">
	</div>
	<br>
	<p>
	اين قانون زماني فعال مي­شود كه PageSpeed Insights تشخيص دهد HTML شامل فايل جاوا اسكريپت بلوك كننده خارجي در محتواي نيمه بالاي صفحه مي­شود. 
	</p>
	<p>
		بازنگری
	</p>
	<p>قبل از اينكه مرورگر بتواند صفحه را بازگرداني كند، بايد يك درخت DOM از طريق تجزيه كدنويسي HTML‌ايجاد كند. در اين فرآيند،‌ وقتي عنصر تجزيه كننده با اسكريپت روبرو شود، بايد فرآيند را متوقف كرده و اول اسكريپت را اجرا كند. سپس مي­تواند تجزيه HTML‌ را ادامه دهد. در صورت وجود اسكريپت خارجي،‌ عنصر تجزيه كننده مجبور است صبر كرده تا تمامي منابع دانلود شوند. اين به معناي يك يا چند مسير داخل شبكه و تاخير اولين بازگرداني صفحه است.  براي اطلاعات بيشتر در مورد تأثير جاوا اسكريپت بر مسير حياتي بازگرداني به بخش اضافه كردن قابليت كنش گرا با جاوا اسكريپت1 مراجعه كنيد. 
	</p>
	<p>
	توصیه‌ها 
	</p>
	<p>
	شما بايد از جاوا اسكريپت­هاي بلوك كننده خودداري كرده و در صورت لزوم، آنها را كوچك كنيد، مخصوصا وقتي اسكريپت خارجي كه قبل از اجرا بايد دريافت شوند. اسكريپت­هايي كه براي بازگرداني محتواي صفحه لازم هستند را مي­توان اين­لاين كرده تا از درخواست بيشتر در شبكه جلوگيري كرد. البته محتواي اين­لاين شده بايد كوچك بوده و سريعا اجرا شود. بدين ترتيب عملكرد ارتقا پيدا خواهد كرد. اسكريپت­هايي كه براي بازگرداني اوليه حياتي نيستند را مي­توان ناهماهنگ تنظيم كرده يا تا زمان بعد از اولين بازگرداني تأخير انداخت. يادتان باشد كه اين كار با هدف بهبود زمان بارگذاري صورت مي­گيرد، و همين طور شما بايد CSS‌ را نيز بهبود بخشيد. 
	</p>
	<p>اين­لاين كردن جاوا اسكريپت</p>
	<p>
	اسكريپيت­هاي بلوك كننده خارجي مرورگر را مجبور مي­كنند تا زمان دريافت جاوا اسكريپت صبر كند. اين به معناي اضافه شدن يك يا چند مسير شبكه قبل از بازگرداني صفحه است. اگر اسكرپيت­هاي خارجي كوچك باشند، مي­توانيد آنها را مستقيما در سند HTML قرار داده و از تأخير درخواست شبكه جلوگيري كنيد. براي مثال، اگر HTML‌ چنين شكلي داشت باشد:
	</p>
	<pre>
		<html>
  <head>
    <script type="text/javascript" src="small.js"></script>
  </head>
  <body>
    <div>
      Hello, world!
    </div>
  </body>
</html>
	</pre>	
	<p>
				و small.js چنين شكلي داشته باشد:
				/* contents of a small JavaScript file */	
				پس مي­توانيد طبق شكل زير اسكريپت را اين­لاين كنيد:
	</p>
	<pre>
	<html>
  <head>
    <script type="text/javascript">
      /* contents of a small JavaScript file */
    </script>
  </head>
  <body>
    <div>
      Hello, world!
    </div>
  </body>
</html>
	</pre>
	<p>
	اين­لاين كردن محتواي اسكريپت درخواست خارجي براي small.js را حذف كرده و مرورگر مي­تواند زمان بازگرداني اوليه سريعتري داشته باشد. البته توجه داشته باشيد كه اين­لاين كردن همين طور باعث افزايش اندازه سند HTML شده و همان محتواي اسكريپت بايد در تمامي صفحات اين­لاين شود. در نتيجه، شما تنها بايد اسكريپت­هاي كوچكك را اين­لاين كرده تا بهترين عملكرد را بدست آوريد.
	</p>
	<p>ناهماهنگ كردن جاوا اسكريپت</p>
	<p> Adding interactivity with JavaScript</p>
	<p>
	طبق تنظيمات پايه، جاوا اسكريپت ساختار DOM‌ را مهار كرده و بنابراين اولين بازگرداني را به تأخير مي­اندازد. پيشنهاد مي­كنيم براي پيشگيري از اين موضوع، قابليت HTML async را در اسكريپت­هاي خارجي بكار ببريد. براي مثال: 
	</p>
	<pre>
			script async src="my.js"
	</pre>
	<p>
	براي كسب اطلاعات بيشتر در مورد اسكريپت­هاي ناهماهنگ، به بخش بلوك تجزيه كننده در مقابل جاوا اسكريپت ناهماهنگ1 مراجعه كنيد. توجه داشته باشيد اسكريپت­هاي ناهماهنگ هميشه با ترتيب خاص اجرا نشده و نبايد از قابليت Document,write در آنها استفاده شود. اسكريپت­­هايي كه به ترتيب اجرا يا دسترسي و يا اصلاح DOM يا CSSOM صفحه نياز دارند، را مي­توان با بازنويسي سازمان دهي كرد.
	</p>
	<p>بارگذاري متفاوت جاوا اسكريپت</p>
	<p>زمان بازگذاري و اجراي اسكريپت­­هايي كه براي بازگرداني اوليه صفحه الزامي نيستند را مي­توان تغيير داده و به پس از بازگرداني اوليه يا بازگرداني بخش­هاي حياتي صفحه موكول كرد. چنين كاري باعث كاهش منابع لازم براي نمايش محتوا و بهبود عملكرد خواهد شد. </p>
	<p>سوالات متداول</p>
	<p>
		اگر من از كتابخانه جاوا اسكريپت مانند jQuery استفاده كنم، مشكلي پيش خواهد آمد؟
		بسياري از كتابخانه­هاي جاوا اسكريپت مانند jQuery براي ارتقاي صفحه و افزايش قابليت كنش پذيري، انيميشن،‌ و ساير جلوه­ها استفاده مي­شوند. البته بسياري از اين رفتارها را مي­توان پس از بازگرداني محتواي نيمه بالاي صفحه اجرا كرد. در اين موارد نيز مي­توانيد از جاوا اسكريپت ناهماهنگ يا تغيير زمان اجراي جاوا اسكريپت استفاده كنيد. 
		اگر من از چهارچوب جاوا اسكريپت­ براي ساختن صفحه استفاده كنم، مشكلي پيش مي­آيد؟
		اگر محتواي صفحه توسط جاوا اسكريپت­ سمت مشتري ساخته شود، شما بايد ما‍ژولهاي جاوا اسكريپت­ مرتبط را اين­لاين كرده تا از مسيرهاي اضافي شبكه خودداري كنيد. همين طور، مي­توانيد از بازگرداني سمت سرور1 براي بهبود قابل توجه سرعت بارگذاري اولين صفحه اسفتاده كنيد: قالب­هاي جاوا اسكريپت­ را بر روي سرور بازگرداني كرده تا اولين بازگرداني سريعتري داشته باشيد. سپس از قالب سمت مشتري پس از بارگذاري صفحه بهره ببريد. براي اطلاعات بيشتر در مورد بازگرداني سمت سرور از صفحه http://youtu.be/VKTWdaupft0?t=14m28s ديدن فرماييد. 
	</p>
	
</article>